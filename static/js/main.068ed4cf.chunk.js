(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(t,e,i){t.exports=i(25)},17:function(t,e,i){},23:function(t,e,i){t.exports=i.p+"static/media/spritesheet.f9ce9100.png"},24:function(t,e,i){t.exports=i.p+"static/media/theDude.7e8a22ae.png"},25:function(t,e,i){"use strict";i.r(e);var n=i(1),r=i.n(n),o=i(11),a=i.n(o),s=(i(17),i(0)),c=i(4),h=i(7),d=i(5),u=i(8),l=i(2),p=i(3),g=i.n(p),f=i(6),S=new function t(){var e=this;Object(s.a)(this,t),this._prt=function(){var t=Object(f.a)(g.a.mark(function t(e){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(t){return new Promise(function(e){return setTimeout(e,t)})}(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),this._randInt=function(t,e){return Math.floor(Math.random()*(e-t)+t)},this._getRandomGridBox=function(t){var i=null;for(var n in t)e._randInt(0,100)>70&&(i=t[n]);return i||e._getRandomGridBox(t)},this.nDirections={0:"NORTH_WEST",1:"WEST",2:"SOUTH_WEST",3:"NORTH",5:"SOUTH",6:"NORTH_EAST",7:"EAST",8:"SOUTH_EAST"},this.boxConfig={grid:{_getRandomTypeConstant:function(){return[0,0,2,0,2,2,1,0,0,0,2,0,0,0,3,0,0,2,0,0][Math.floor(19*Math.random())+1]},gridTypes:{0:{type:"walkable",const:0,passable:!0,friction:0,damage:0,color:"#d2d2d2",sprite:{x:0,y:0,width:50,height:50,type:0}},1:{type:"walkableSlow",const:1,passable:!0,friction:Number((.5*Math.random()+.3).toFixed(2)),damage:0,color:"#80cccc",sprite:[{x:100,y:0,width:50,height:50,type:1},{x:100,y:50,width:50,height:50,type:1},{x:100,y:100,width:50,height:50,type:1}][this._randInt(1,3)-1]},2:{type:"blocked",const:2,passable:!1,friction:0,damage:0,color:"#7a7a7a",sprite:[{x:50,y:0,width:50,height:50,type:2},{x:50,y:50,width:50,height:50,type:2},{x:50,y:100,width:50,height:50,type:2}][this._randInt(1,3)-1]},3:{type:"damage",passable:!0,const:3,friction:Number((.5*Math.random()+.3).toFixed(2)),damage:Number((.5*Math.random()+.25).toFixed(2)),color:"#c4341b",sprite:[{x:150,y:0,width:50,height:50,type:3},{x:150,y:50,width:50,height:50,type:3},{x:150,y:100,width:50,height:50,type:3}][this._randInt(1,3)-1]}}},char:{charTypes:{0:{type:"ninja",const:0,width:50,height:50,spriteSet:{down:{x:0,y:0,width:56,height:72},up:{x:0,y:74,width:53,height:72},left:{x:0,y:146,width:53,height:72},right:{x:0,y:219,width:53,height:72}}}}},turret:{turretTypes:{0:{type:"gunner",const:0,width:50,height:50,sprite:{x:0,y:0,width:100,height:50}}}}}},w=function(t){var e=t.game,i=t.utils;return{GridBox:function(t){var n=this,r=t.key,o=t.gX,a=t.gY,s=t.x,c=t.y,h=t.width,d=t.height,u=t.type,l=t.passable,p=t.friction,g=t.damage,f=t.color,S=t.sprite;this.key=r,this.gX=o,this.gY=a,this.x=s||0,this.y=c||0,this.width=h||0,this.height=d||0,this.type=u,this.passable=l,this.friction=p,this.damage=g,this.color=f,this.sprite=S,this.origSprite=Object.assign({},S),this._resetSprite=function(){return n.sprite=n.origSprite},this.gScore=0,this.hScore=0,this.fScore=0,this.parentZone={},this._setParent=function(t){return n.parentZone=t},this._clearParent=function(){return n.parentZone=null},this.isSelected=!1,this._select=function(){return n.isSelected=!0},this._deselect=function(){return n.isSelected=!1},this.isSource=!1,this.isNextSource=!1,this._setNextSource=function(){return n.isNextSource=!0},this._setSource=function(){n.isSource=!0,n.sprite={x:0,y:50,width:50,height:50,type:0},e.heroPosition=n,n.isNextSource&&(n.isNextSource=!1)},this._clearSource=function(){n.isSource=!1,n.sprite=n.origSprite,delete e.heroPosition},this.isRaySource=!1,this._setRaySource=function(){return n.isRaySource=!0},this.isDestination=!1,this.isNextDestination=!1,this._setNextDestination=function(){return n.isNextDestination=!0},this._setDestination=function(){n.isDestination=!0,n.sprite={x:0,y:100,width:50,height:50,type:0},e.heroDestination=n,n.isNextDestination&&(n.isNextDestination=!1)},this._clearDestination=function(){n.isDestination=!1,n.sprite=n.origSprite,delete e.heroDestination},this._setNearestState=function(){return n.isDestination?null:n.sprite={x:0,y:150,width:50,height:50,type:0}},this._setNeighborState=function(){return n.isDestination?null:n.sprite={x:0,y:200,width:50,height:50,type:0}},this._getNeighbors=function(){for(var t=n.gX,r=n.gY,o=[],a=0,s=t-1;s<=t+1;s++)for(var c=r-1;c<=r+1;c++)if(s<0||c<0||s>15||c>11||s===n.gX&&c===n.gY)a++;else{var h=e.gridHash["".concat(s,"-").concat(c)];!e.excludeDiagonals||0!==a&&2!==a&&6!==a&&8!==a?(h.direction=i.nDirections[a],o.push(h),a++):a++}return o}},CharBox:function(t){var e=this,i=t.x,n=t.y,r=t.width,o=t.height,a=t.type,s=t.color,c=t.sprite,h=t.spriteSet;this.x=i||0,this.y=n||0,this.width=r||0,this.height=o||0,this.type=a,this.color=s||"rgba(255,255,255,0)",this.sprite=c,this.spriteSet=h,this._setSpriteDirection=function(t){e.sprite=e.spriteSet[{NORTH:"up",NORTH_WEST:"up",NORTH_EAST:"up",SOUTH:"down",SOUTH_WEST:"down",SOUTH_EAST:"down",EAST:"right",WEST:"left"}[t||"SOUTH"]]}}}},x=i(9),y=function(t){var e=t.game,i=t.utils;return new function t(){Object(s.a)(this,t),this._initNewGrid=function(t){var n=t.rows,r=t.cols,o=t.t_width,a=t.t_height;if(o%r||a%n)throw new Error("Error creating game grid: Please ensure that the desired column and row counts divide evenly into the total width and height of the level!");for(var s=o/r,c=a/n,h={},d=0;d<=n-1;d++)for(var u=0;u<=r-1;u++){var l="".concat(u,"-").concat(d),p=u,g=d,f=u*s,S=d*c,w=i.boxConfig.grid.gridTypes[i.boxConfig.grid._getRandomTypeConstant()],y=new e.Classes.GridBox(Object(x.a)({key:l,gX:p,gY:g,x:f,y:S,width:s,height:c},w));!e.heroPosition&&i._randInt(1,20)>15&&"walkable"===y.type&&(e.heroPosition=y),h[l]=y}return h},this._resetGrid=function(){var t,i;for(var n in console.log("resetting"),e.gridHash){var r=e.gridHash[n];r.isNextSource&&(t=r),r.isNextDestination&&(i=r),r.sprite=r.origSprite,r.gScore=0,r.hScore=0,r.fScore=0,r._deselect(),r._clearParent(),r._clearDestination(),r._clearSource()}delete e.heroPosition,delete e.heroDestination,t._setSource(),i._setDestination()}}},_=function(t){var e=t.game,i=t.utils,n=t.TWEEN;return new function t(){Object(s.a)(this,t),this._initNewHero=function(t){t._setSource();var n=t.x,r=t.y,o=i.boxConfig.char.charTypes[0];return new e.Classes.CharBox(Object(x.a)({x:n,y:r,sprite:o.spriteSet.down},o))},this._tween=function(t,e,i){var r;if(e)return r=new n.Tween(t).to({x:e.x,y:e.y},360),t._setSpriteDirection(e.direction),r.start()}}},m=function(t){var e=t.game,i=t.utils;return new function t(){var n=this;Object(s.a)(this,t),this._findPath=function(){n.allDone&&e.Scripts.Grid._resetGrid(),console.log("starting path"),e.findingPath=!0,n.allDone=!1,n.iterations=0,n.nextNearest=null,n.openList={},n.closedList={},n.openList[e.heroPosition.key]=e.heroPosition,n._iteratePath()},this._finishPath=function(){e.heroDestination._setNextSource(),e.findingPath=!1,n.allDone=!0,console.log("completed path")},this._iteratePath=Object(f.a)(g.a.mark(function t(){var r,o,a,s;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.allDone){t.next=2;break}return t.abrupt("return",n._finishPath());case 2:return r=-1,t.next=5,i._prt(300);case 5:for(o in n.openList)(-1===r||n.openList[o].fScore<r)&&(r=n.openList[o].fScore,n.nextNearest=n.openList[o]);if(e.tweenHeroWithAlgorithm&&e.Scripts.Hero._tween(e.hero,n.nextNearest),!n.nextNearest.isDestination){t.next=12;break}return n._finishPath(),t.abrupt("return");case 12:(a=n.openList[n.nextNearest.key]||!1)&&(s=n.nextNearest.key,delete n.openList[s],n.closedList[s]=a),n.nextNearest._getNeighbors().forEach(function(t){"blocked"===t.type||t.isSource||n.closedList[t.key]||(n.openList[t.key]?n.nextNearest.gScore+n._calcGScore(t)<t.gScore&&(t.parentZone=n.nextNearest,t.gScore=n.nextNearest.gScore+n._calcGScore(t),t.fScore=n._calcFScore(t)):(n.openList[t.key]=t,e.showPath&&(t._setNeighborState(),n.nextNearest._setNearestState()),t.parentZone=n.nextNearest,t.gScore=(t.parentZone.gScore||0)+n._calcGScore(t),t.hScore=n._calcHScore(t),t.fScore=n._calcFScore(t))),e.gridHash[t.key].gScore=t.gScore}),(!Object.keys(n.openList).length||n.iterations>800)&&(n.allDone=!0),n.iterations++,n.allDone||n._iteratePath();case 19:case"end":return t.stop()}},t,this)})),this._calcFScore=function(t){return t.gScore+t.hScore},this._calcHScore=function(t){return 10*(Math.abs(t.x-e.heroDestination.x)+Math.abs(t.y-e.heroDestination.y))},this._calcGScore=function(t){var e=t.direction,i=t.type,n=0;switch(e){case"NORTH":case"SOUTH":case"WEST":case"EAST":n+=10;break;case"NORTH_EAST":case"NORTH_WEST":case"SOUTH_EAST":case"SOUTH_WEST":n+=20}return"walkableSlow"===i&&(n+=20),"damage"===i&&(n+=40),n}}},b=i(21),v=new Image;v.src=i(23);var N=new Image;N.src=i(24);var T=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(h.a)(this,Object(d.a)(e).call(this))).componentWillMount=function(){t.mode=t.props.mode||"pathfind",t.cWidth=t.props.width||800,t.cHeight=t.props.height||600},t.componentDidMount=function(){"pathfind"===t.mode&&(t.showPath=!0,t.showScore=!0,t.excludeDiagonals=!0,t.tweenHeroWithAlgorithm=!0),t._initializeGameCanvas()},t._initializeGameCanvas=function(){t.canvas=t.refs.g_canvas,t.ctx=t.canvas.getContext("2d"),t.gridHash=t.Scripts.Grid._initNewGrid({rows:12,cols:16,t_width:t.cWidth,t_height:t.cHeight}),t.hero=t.Scripts.Hero._initNewHero(t.heroPosition),t.canvas.addEventListener("click",function(e){var i={x:Math.ceil(e.clientX/50)-1,y:Math.ceil(e.clientY/50)-1},n="".concat(i.x,"-").concat(i.y),r=t.gridHash[n];"walkable"===r.type&&(t.findingPath||(t.heroDestination&&t.heroDestination.key!==r.key?r._setNextDestination():r._setDestination(),t.Scripts.PF._findPath()))}),window.addEventListener("keypress",function(e){"p"===e.key&&(t.isPaused?(t.isPaused=!1,t._renderLoop()):(t.isPaused=!0,cancelAnimationFrame(t.frameId)))}),t._renderLoop()},t._renderLoop=function(e){t._drawRender(),b.update(e||0),t.frameId=requestAnimationFrame(t._renderLoop)},t._drawRender=function(){t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t._drawGrid(),t._drawBox("hero",t.hero)},t._drawGrid=function(){for(var e in t.gridHash)t._drawBox("grid",t.gridHash[e])},t._drawBox=function(e,i){if(i)switch(e){case"grid":return t.ctx.fillRect(i.x,i.y,i.width,i.height),t.ctx.drawImage(v,i.sprite.x,i.sprite.y,i.sprite.width,i.sprite.height,i.x,i.y,i.width,i.height),void(i.gScore&&t.showScore&&(t.ctx.font="20px Arial",t.ctx.fillStyle="walkableSlow"===i.type?"#603F39":"damage"===i.type?"#F07E2D":"#FFF",t.ctx.fillText(i.gScore,i.x+5,i.y+20)));case"hero":return t.ctx.fillStyle=i.color,t.ctx.fillRect(i.x,i.y,i.width,i.height),void t.ctx.drawImage(N,i.sprite.x,i.sprite.y,i.sprite.width,i.sprite.height,i.x,i.y,i.width,i.height);default:return}},t.Classes=w({game:Object(l.a)(Object(l.a)(t)),utils:S}),t.Scripts={Grid:y({game:Object(l.a)(Object(l.a)(t)),utils:S}),Hero:_({game:Object(l.a)(Object(l.a)(t)),utils:S,TWEEN:b}),PF:m({game:Object(l.a)(Object(l.a)(t)),utils:S})},t.isPaused=!1,t}return Object(u.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("canvas",{id:"g_canvas",ref:"g_canvas",width:this.cWidth,height:this.cHeight}))}}]),e}(n.Component),O=function(t){function e(){return Object(s.a)(this,e),Object(h.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{style:{width:"800px",height:"600px",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(T,{width:800,height:600,mode:"pathfind"}))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[12,2,1]]]);
//# sourceMappingURL=main.068ed4cf.chunk.js.map